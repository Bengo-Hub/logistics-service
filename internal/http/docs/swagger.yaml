openapi: 3.0.0
info:
  title: Logistics Service API
  description: HTTP API for the BengoBox logistics service. Provides fleet management, task assignment, routing, and delivery tracking.
  version: 0.1.0
  contact:
    name: BengoBox Support
servers:
  - url: https://logistics.codevertex.local
    description: Local development server (HTTPS)
  - url: https://logistics.codevrtexitsolutions.com
    description: Production server
paths:
  /healthz:
    get:
      tags:
        - Health
      summary: Service liveness probe
      description: Returns OK when the logistics API process is running.
      responses:
        '200':
          description: Service is alive
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: ok
                  service:
                    type: string
                    example: logistics-service
  /readyz:
    get:
      tags:
        - Health
      summary: Readiness probe
      description: Validates connectivity to Postgres, Redis, and NATS backends.
      responses:
        '200':
          description: Service is ready
        '503':
          description: Service dependencies unavailable
  /metrics:
    get:
      tags:
        - Health
      summary: Prometheus metrics
      description: Exposes Prometheus metrics for scraping.
      responses:
        '200':
          description: Prometheus metrics payload
  /v1/{tenant}/tasks:
    get:
      tags:
        - Tasks
      summary: List delivery tasks
      description: Returns a list of delivery tasks for the specified tenant.
      security:
        - bearerAuth: []
      parameters:
        - name: tenant
          in: path
          required: true
          schema:
            type: string
          description: Tenant slug
      responses:
        '200':
          description: List of delivery tasks
        '401':
          description: Unauthorized
        '500':
          description: Internal server error
  /v1/{tenant}/fleet/members:
    get:
      tags:
        - Fleet
      summary: List fleet members
      description: Returns a list of fleet members (drivers/riders) for the specified tenant.
      security:
        - bearerAuth: []
      parameters:
        - name: tenant
          in: path
          required: true
          schema:
            type: string
          description: Tenant slug
      responses:
        '200':
          description: List of fleet members
        '401':
          description: Unauthorized
        '500':
          description: Internal server error
  /v1/{tenant}/routes/{routeId}:
    get:
      tags:
        - Routes
      summary: Get route details
      description: Returns details for a specific route.
      security:
        - bearerAuth: []
      parameters:
        - name: tenant
          in: path
          required: true
          schema:
            type: string
          description: Tenant slug
        - name: routeId
          in: path
          required: true
          schema:
            type: string
          description: Route identifier
      responses:
        '200':
          description: Route details
        '401':
          description: Unauthorized
        '404':
          description: Route not found
        '500':
          description: Internal server error
components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: JWT token from auth-service. Format: Bearer {token}

